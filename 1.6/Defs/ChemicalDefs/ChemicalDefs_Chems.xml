<?xml version="1.0" encoding="utf-8" ?>
<Defs>

    <!-- Med-X addiction -->

    <ChemicalDef>
        <defName>FCP_MedX</defName>
        <label>Med-X</label>
        <addictionHediff>FCP_MedXAddiction</addictionHediff>
        <toleranceHediff>FCP_MedXTolerance</toleranceHediff>
        <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
        <geneToleranceBuildupFactorResist>0.5</geneToleranceBuildupFactorResist>
        <geneToleranceBuildupFactorImmune>0</geneToleranceBuildupFactorImmune>
    </ChemicalDef>

    <NeedDef ParentName="DrugAddictionNeedBase">
        <defName>Chemical_FCP_MedX</defName>
        <needClass>Need_Chemical</needClass>
        <label>Med-X</label>
        <description>Because of a Med-X dependence, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
        <listPriority>45</listPriority>
    </NeedDef>

    <HediffDef ParentName="DrugToleranceBase">
        <defName>FCP_MedXTolerance</defName>
        <label>Med-X tolerance</label>
        <description>A built-up tolerance to Med-X. The more severe this tolerance is, the more Med-X it takes to get the same effect.</description>
        <comps>
            <li Class="HediffCompProperties_SeverityPerDay">
                <severityPerDay>-0.015</severityPerDay>
            </li>
            <li Class="HediffCompProperties_DrugEffectFactor">
                <chemical>FCP_MedX</chemical>
            </li>
        </comps>
        <hediffGivers>
            <li Class="HediffGiver_RandomDrugEffect">
                <hediff>ChemicalDamageModerate</hediff>
                <severityToMtbDaysCurve>
                    <points>
                        <li>(0.45, 99999)</li>
                        <li>(0.5, 180)</li>
                        <li>(1, 135)</li>
                    </points>
                </severityToMtbDaysCurve>
                <partsToAffect>
                    <li>Brain</li>
                </partsToAffect>
            </li>
        </hediffGivers>
    </HediffDef>

    <HediffDef ParentName="AddictionBase">
        <defName>FCP_MedXAddiction</defName>
        <label>Med-X addiction</label>
        <description>A chemical addiction to Med-X. Long-term presence of Med-X has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
        \nWithout regular doses of Med-X, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
        <hediffClass>Hediff_Addiction</hediffClass>
        <causesNeed>Chemical_FCP_MedX</causesNeed>
        <comps>
            <li Class="HediffCompProperties_SeverityPerDay">
                <severityPerDay>-0.0333</severityPerDay>
            </li>
        </comps>
        <stages>
            <li>
            </li>
            <li>
                <label>withdrawal</label>
                <painFactor>1.5</painFactor>
                <restFallFactorOffset>0.3</restFallFactorOffset>
                <socialFightChanceFactor>2.0</socialFightChanceFactor>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.20</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.30</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.50</offset>
                    </li>
                </capMods>
                <mentalStateGivers>
                    <li>
                        <mentalState>Binging_DrugExtreme</mentalState>
                        <mtbDays>40</mtbDays>
                    </li>
                    <li>
                        <mentalState>Wander_Psychotic</mentalState>
                        <mtbDays>10</mtbDays>
                    </li>
                </mentalStateGivers>
            </li>
        </stages>
    </HediffDef>

    <ThoughtDef>
        <defName>FCP_MedXWithdrawal</defName>
        <workerClass>ThoughtWorker_Hediff</workerClass>
        <hediff>FCP_MedXAddiction</hediff>
        <validWhileDespawned>true</validWhileDespawned>
        <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
        <stages>
            <li>
                <visible>false</visible>
            </li>
            <li>
                <label>Med-X withdrawal</label>
                <description>I feel like my whole body is on fire. Every injury screams at me. I need Med-X!</description>
                <baseMoodEffect>-35</baseMoodEffect>
            </li>
        </stages>
    </ThoughtDef>

</Defs>